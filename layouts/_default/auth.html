{{ define "main" }}
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  @font-face {
    font-family: 'Gravity Wide';
    src: url('/fonts/ABCGravity/ABCGravity-Wide-Trial.woff2') format('woff2');
    font-weight: 400;
    font-style: normal;
  }

  @font-face {
    font-family: 'Diatype-bold';
    src: url('/fonts/ABCDiatype/ABCDiatype-Bold-Trial.woff2') format('woff2');
    font-weight: 700;
    font-style: normal;
  }

  @font-face {
    font-family: 'Diatype-light';
    src: url('/fonts/ABCDiatype/ABCDiatype-Light-Trial.woff2') format('woff2');
    font-weight: 300;
    font-style: normal;
  }

  .header {
    position: relative;
    top: 0;
    z-index: 10;
  }

  body {
    background-color: #000;
    color: white;
    font-family: 'Diatype-light', sans-serif;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  /* Header */
  .header {
    padding: 5vh 7.5vw;
    background: linear-gradient(to bottom, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0) 100%);
  }

  .logo {
    display: inline-block;
    text-decoration: none;
    color: inherit;
  }

  .logo-text {
    font-family: 'Gravity Wide', sans-serif;
    font-feature-settings: "ss05";
    font-weight: 800;
    font-size: 2.3rem;
    line-height: 0.75;
    color: white;
    cursor: pointer;
    transition: color 0.3s ease;
  }

  .tagline-text {
    font-family: 'Diatype-bold', sans-serif;
    font-size: 0.71rem;
    max-width: 35rem;
    padding-left: 0.2rem;
    line-height: 1.4;
    margin-top: 0.25rem;
    color: lightgray;
  }

  /* Main Content */
  .signup-container {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    justify-self: center;
    width: 50vw;
    padding: 0 5vw;
    min-height: calc(100vh - 20vh);
  }

  .signup-box {
    width: 100%;
    max-width: 600px;
    max-height: 85vh;
    overflow-y: auto;
    background: rgba(20, 20, 20, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 12px;
    padding: 3rem;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .signup-box::-webkit-scrollbar {
    display: none;
  }

  #signup-form {
    margin-top: 5vh;
    width: 90vw;
  }

  .signup-heading {
    font-family: 'Diatype-bold', sans-serif;
    font-size: 2rem;
    color: white;
    margin-top: 5vh;
    margin-bottom: 1vh;
    text-align: center;
  }

  .signup-subheading {
    font-family: 'Diatype-Light';
    text-align: center;
  }

  .form-group {
    margin-bottom: 1.5rem;
  }

  .form-label {
    display: block;
    font-family: 'Diatype-bold', sans-serif;
    font-size: 0.9rem;
    letter-spacing: 0.05em;
    margin-bottom: 0.5rem;
    color: rgba(255, 255, 255, 0.9);
  }

  .form-input {
    width: 100%;
    padding: 0.875rem 1rem;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.15);
    color: white;
    font-family: 'Diatype-light', sans-serif;
    font-size: 1rem;
    transition: all 0.3s ease;
  }

  .form-input::placeholder {
    color: rgba(255, 255, 255, 0.4);
  }

  .form-input:focus {
    outline: none;
    border-color: rgba(255, 221, 0, 0.6);
    background: rgba(255, 255, 255, 0.08);
    box-shadow: 0 0 0 3px rgba(255, 221, 0, 0.1);
  }

  .form-checkbox {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin: 1.25rem 0;
  }

  .form-checkbox input[type="checkbox"] {
    width: 18px;
    height: 18px;
    accent-color: rgb(255, 221, 0);
    cursor: pointer;
  }

  .form-checkbox label {
    font-size: 0.9rem;
    color: rgba(255, 255, 255, 0.8);
    cursor: pointer;
  }

  .submit-button {
    width: 100%;
    padding: 1rem;
    background: rgba(255, 221, 0, 0.2);
    border: 2px solid rgba(255, 221, 0, 0.6);
    border-radius: 8px;
    color: rgb(255, 221, 0);
    font-family: 'Diatype-bold', sans-serif;
    font-size: 1rem;
    letter-spacing: 0.08em;
    cursor: pointer;
    transition: all 0.3s ease;
    text-transform: uppercase;
  }

  .submit-button:hover {
    background: rgb(255, 221, 0);
    color: black;
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(255, 221, 0, 0.3);
  }

  .submit-button:active {
    transform: translateY(0);
  }

  .terms-text {
    margin-top: 1.5rem;
    font-size: 0.8rem;
    color: rgba(255, 255, 255, 0.5);
    text-align: center;
    line-height: 1.5;
  }

  .terms-text a {
    color: rgba(255, 221, 0, 0.8);
    text-decoration: none;
    transition: color 0.3s ease;
  }

  .terms-text a:hover {
    color: rgb(255, 221, 0);
  }

  /* Membership Plans */
  .plan-cards {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.75rem;
    margin-top: 0.75rem;
  }

  .plan-card {
    position: relative;
    padding: 1.25rem 1rem;
    background: rgba(255, 255, 255, 0.04);
    border: 2px solid rgba(255, 255, 255, 0.15);
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .plan-card input[type="radio"] {
    position: absolute;
    opacity: 0;
    cursor: pointer;
  }

  .plan-card:hover {
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(255, 221, 0, 0.4);
  }

  .plan-card:has(input[type="radio"]:checked) {
    background: rgba(255, 221, 0, 0.1);
    border-color: rgb(255, 221, 0);
    transform: translateY(-2px);
  }

  .plan-badge {
    position: absolute;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);
    background: rgb(255, 221, 0);
    color: black;
    font-family: 'Diatype-bold', sans-serif;
    font-size: 0.7rem;
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    letter-spacing: 0.05em;
    white-space: nowrap;
  }

  .plan-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.35rem;
    opacity: 0.7;
    transition: opacity 0.3s ease;
  }

  .plan-card input[type="radio"]:checked ~ .plan-content {
    opacity: 1;
  }

  .plan-name {
    font-family: 'Diatype-bold', sans-serif;
    font-size: 0.95rem;
    letter-spacing: 0.05em;
    color: white;
  }

  .plan-price {
    font-family: 'Diatype-bold', sans-serif;
    font-size: 1.5rem;
    color: white;
    line-height: 1;
  }

  .plan-period {
    font-size: 0.75rem;
    color: rgba(255, 255, 255, 0.6);
  }

  .plan-desc {
    font-size: 0.75rem;
    color: rgba(255, 255, 255, 0.6);
  }

  /* Discount Section */
  .discount-verification {
    margin-top: 1rem;
    padding: 1rem;
    background: rgba(255, 221, 0, 0.05);
    border: 1px solid rgba(255, 221, 0, 0.2);
    border-radius: 8px;
  }

  .form-hint {
    font-size: 0.8rem;
    color: rgba(255, 255, 255, 0.5);
    margin-top: 0.35rem;
    font-style: italic;
  }

  .file-input {
    padding: 0.5rem;
    font-size: 0.9rem;
  }

  .file-input::file-selector-button {
    background: rgba(255, 221, 0, 0.2);
    border: 1px solid rgba(255, 221, 0, 0.5);
    border-radius: 6px;
    color: rgb(255, 221, 0);
    font-family: 'Diatype-bold', sans-serif;
    font-size: 0.85rem;
    padding: 0.5rem 1rem;
    cursor: pointer;
    margin-right: 1rem;
    transition: all 0.3s ease;
  }

  .file-input::file-selector-button:hover {
    background: rgba(255, 221, 0, 0.3);
  }

  /* Price Summary */
  .price-summary {
    margin: 1.5rem 0;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
  }

  .price-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.95rem;
    color: rgba(255, 255, 255, 0.8);
  }

  .total-row {
    font-family: 'Diatype-bold', sans-serif;
    font-size: 1.1rem;
    color: white;
  }

  .pricing-note {
    margin-top: 0.75rem;
    padding-top: 0.75rem;
    border-top: 1px solid rgba(255, 255, 255, 0.15);
    font-size: 0.8rem;
    color: rgba(255, 221, 0, 0.9);
    margin-bottom: 0;
    font-style: italic;
  }

  .student {
    display: none;
    margin-top: -1vh;
    font-size: 1.5rem;
    color: rgb(255, 221, 0);
    text-align: center;
    text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
  }

  .plan-price-amount {
    font-family: 'Diatype-bold', sans-serif;
    font-size: 1.5rem;
    color: white;
    line-height: 1;
  }

  .plan-price-original {
    font-family: 'Diatype-bold', sans-serif;
    font-size: 1rem;
    color: rgba(255, 255, 255, 0.4);
    text-decoration: line-through;
    margin-right: 0.25rem;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .header {
      padding: 3vh 5vw;
    }

    .logo-text {
      font-size: 1.8rem;
    }

    .tagline-text {
      font-size: 0.6rem;
    }

    .signup-box {
      padding: 2rem 1.5rem;
      max-height: 80vh;
    }

    .signup-heading {
      font-size: 1.5rem;
    }

    .plan-cards {
      grid-template-columns: 1fr;
      gap: 1rem;
    }

    .plan-card {
      padding: 1.5rem 1rem;
    }
  }

  @media (max-width: 480px) {
    .logo-text {
      font-size: 1.5rem;
    }

    .tagline-text {
      font-size: 0.5rem;
    }

    .signup-box {
      padding: 1.75rem 1.25rem;
    }

    .form-input {
      font-size: 0.95rem;
      padding: 0.75rem 0.875rem;
    }
  }
</style>

<!-- Sign Up Container -->
<h2 class="signup-heading">COMPLETE REGISTRATION</h2>
<h3 class="student">STUDENT SIGN UP</h3>
<P class="signup-subheading">Secure your CATHAYPLAY account to start watching great films at home and on the go.</p>

<div class="signup-container">
  <form id="signup-form">
    <div class="form-group">
      <input 
        type="text" 
        id="signup-name" 
        class="form-input" 
        placeholder="Your name"
        required
      >
    </div>

    <div class="form-group">
      <input 
        type="email" 
        id="signup-email" 
        class="form-input" 
        placeholder="your@email.com"
        required
      >
    </div>

    <div class="form-group">
      <input 
        type="password" 
        id="signup-password" 
        class="form-input" 
        placeholder="Set a password"
        required
      >
    </div>

    <div class="form-group">
      <input 
        type="password" 
        id="signup-confirm" 
        class="form-input" 
        placeholder="Confirm your password"
        required
      >
    </div>

    <!-- Membership Plans -->
    <div class="form-group">
      <label class="form-label">Select Membership Plan</label>
      <div class="plan-cards">
        <label class="plan-card">
          <input type="radio" name="plan" value="trial" data-price="0.00" required>
          <div class="plan-content">
            <div class="plan-name">Trial</div>
            <div class="plan-price">$0.00</div>
            <div class="plan-desc">Browsing only</div>
          </div>
        </label>

        <label class="plan-card">
          <input type="radio" name="plan" value="monthly" data-price="18.99" required>
          <div class="plan-content">
            <div class="plan-name">Monthly</div>
            <div class="plan-price">$18.99<span class="plan-period">/mo</span></div>
            <div class="plan-desc">Billed monthly</div>
          </div>
        </label>

        <label class="plan-card">
          <input type="radio" name="plan" value="quarterly" data-price="49.99" checked>
          <div class="plan-content">
            <div class="plan-name">Quarterly</div>
            <div class="plan-price">$49.99<span class="plan-period">/3mo</span></div>
            <div class="plan-desc">Billed quarterly</div>
          </div>
        </label>

        <label class="plan-card">
          <input type="radio" name="plan" value="annual" data-price="189.99">
          <div class="plan-badge">Best Value</div>
          <div class="plan-content">
            <div class="plan-name">Annual</div>
            <div class="plan-price">$189.99<span class="plan-period">/yr</span></div>
            <div class="plan-desc">Billed annually</div>
          </div>
        </label>

        <label class="plan-card">
          <input type="radio" name="plan" value="docu" data-price="9.99">
          <div class="plan-content">
            <div class="plan-name">Documentary Lover</div>
            <div class="plan-price">$9.99<span class="plan-period">/mo</span></div>
            <div class="plan-desc">Billed monthly</div>
          </div>
        </label>

        <label class="plan-card">
          <input type="radio" name="plan" value="anthropology" data-price="6.99">
          <div class="plan-content">
            <div class="plan-name">Anthropology Club</div>
            <div class="plan-price">$6.99<span class="plan-period">/mo</span></div>
            <div class="plan-desc">Billed monthly</div>
          </div>
        </label>
      </div>
    </div>

    <!-- Discount Options
    <div class="form-group">
      <label class="form-label" for="discount-type">Account Type</label>
      <select id="discount-type" class="form-input">
        <option value="">Regular</option>
        <option value="student">Student</option>
        <option value="industry">Film Industry Professional</option>
      </select>
    </div>

    <div class="discount-verification" id="discount-verification" style="display: none;">
      <div class="form-group">
        <label class="form-label" for="verification-doc">Verification Document</label>
        <input 
          type="file" 
          id="verification-doc" 
          class="form-input file-input"
          accept=".pdf,.jpg,.jpeg,.png"
        >
        <p class="form-hint">Upload student ID or industry credentials</p>
      </div>
    </div>
    -->

    <!-- Price Summary -->
    <div class="price-summary">
      <div class="price-row total-row">
        <span>Total:</span>
        <span id="total-price">$49.99</span>
      </div>
      <p class="pricing-note" id="pricing-note"></p>
    </div>

    <div class="form-checkbox">
      <input type="checkbox" id="newsletter" checked>
      <label for="newsletter">Send me updates and newsletters</label>
    </div>

    <button type="submit" class="submit-button">Continue to Payment</button>

    <p class="terms-text">
      By signing up, you agree to our <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a>
    </p>
  </form>
</div>

<script>
  // Pricing structure: [regular, student, industry]
  const pricing = {
    trial: [0.00, 0.00, 0.00],
    monthly: [18.99, 6.99, 7.99],
    quarterly: [49.99, 18.99, 21.99],
    annual: [189.99, 69.99, 79.99],
    docu: [9.99, 9.99, 9.99],
    anthropology: [6.99, 6.99, 6.99]
  };

  const planRadios = document.querySelectorAll('input[name="plan"]');
  const emailInput = document.getElementById('signup-email');
  const totalPriceEl = document.getElementById('total-price');
  const pricingNote = document.getElementById('pricing-note');

  // Check if email is .edu
  function isEduEmail(email) {
    const eduRegex = /\.edu(\.|$)|@[\w-]+\.edu$/i;
    return eduRegex.test(email);
  }

  // Update all plan card prices
  function updateAllPlanPrices(priceIndex) {
    planRadios.forEach(radio => {
      const planType = radio.value;
      const price = pricing[planType][priceIndex];
      const planCard = radio.closest('.plan-card');
      const priceElement = planCard.querySelector('.plan-price');
      
      // Get the period text (if exists)
      const periodSpan = priceElement.querySelector('.plan-period');
      const periodText = periodSpan ? periodSpan.outerHTML : '';
      
      // Update the price while keeping the period
      priceElement.innerHTML = `$${price.toFixed(2)}${periodText}`;
    });
  }

  // Apply student pricing
  function applyStudentPricing() {
    const selectedPlan = document.querySelector('input[name="plan"]:checked');
    const planType = selectedPlan.value;
    
    // Update all plan card prices to student pricing
    updateAllPlanPrices(1);
    
    const finalPrice = pricing[planType][1];
    totalPriceEl.textContent = `$${finalPrice.toFixed(2)}`;
    pricingNote.textContent = 'Student pricing applied (verified via .edu email)';
    pricingNote.style.color = 'rgba(255, 221, 0, 0.9)';
    
    selectedPlan.dataset.price = finalPrice;

    // Show student heading
    document.querySelector('.student').style.display = 'block';
  }

  // Apply regular pricing
  function applyRegularPricing() {
    const selectedPlan = document.querySelector('input[name="plan"]:checked');
    const planType = selectedPlan.value;
    
    // Update all plan card prices to regular pricing
    updateAllPlanPrices(0);
    
    const finalPrice = pricing[planType][0];
    totalPriceEl.textContent = `$${finalPrice.toFixed(2)}`;
    pricingNote.textContent = '';
    
    selectedPlan.dataset.price = finalPrice;
  }

  // Update price based on plan and email
  function updatePrice() {
    const email = emailInput.value.trim();
    
    if (isEduEmail(email)) {
      applyStudentPricing();
    } else {
      applyRegularPricing();
    }
  }

  // Listen to email input changes
  emailInput.addEventListener('input', updatePrice);

  // Listen to plan selection changes
  planRadios.forEach(radio => {
    radio.addEventListener('change', updatePrice);
  });

  // Form submission
  document.getElementById('signup-form').addEventListener('submit', (e) => {
    e.preventDefault();
    const password = document.getElementById('signup-password').value;
    const confirm = document.getElementById('signup-confirm').value;
    
    if (password !== confirm) {
      alert('Passwords do not match');
      return;
    }
    
    const selectedPlan = document.querySelector('input[name="plan"]:checked');
    const totalPrice = document.getElementById('total-price').textContent;
    
    console.log('Sign up submitted', {
      plan: selectedPlan.value,
      price: selectedPlan.dataset.price,
      total: totalPrice,
      isStudent: isEduEmail(emailInput.value)
    });
    alert(`Proceeding to payment for ${totalPrice}`);
  });

  // Initialize price
  updatePrice();
</script>
{{ end }}
