{{ define "main" }}
<!-- Hero Section -->
<section class="hero">
  <video autoplay muted loop playsinline class="hero-video">
    <source src="{{ .Params.hero.video }}" type="video/mp4">
    Your browser does not support the video tag
  </video>

  <div class="overlay"></div>

  <div class="hero-text-middle">
    <div class="promotion">
      <h3 class="white">{{ .Params.hero.promotion.text }}</h3>
      <a href="{{ .Params.hero.promotion.button_link }}">
        <button class="promotion-button">{{ .Params.hero.promotion.button_text }}</button>
      </a>
    </div>
    <div class="film-info">
      <div>
        <div class="film-title-container">
          <h2 class="film-title-text">{{ .Params.hero.featured_film.title }}</h2>
          <div class="buttons">
            <a href="{{ .Params.hero.featured_film.watch_link | relURL }}" id="watch-button-hero">WATCH</a>
          </div>
        </div>
        <p class="director">Directed by <strong>{{ .Params.hero.featured_film.director }}</strong><br>{{ .Params.hero.featured_film.year }}</p>
      </div>
      <p class="description">{{ .Params.hero.featured_film.description }}</p>
    </div>
  </div>
</section>

<!-- Recently Added Section -->
<section class="main recently-added">
  <div class="grid-container">
    <div class="grid-heading-container">
      <h2 class="grid-heading" id="recently-added">{{ .Params.recently_added.heading }}</h2>
      <a href="{{ .Params.recently_added.see_all_link }}"><p class="see-all">SEE ALL ></p></a>
    </div>
    <div class="grid">
      {{ range .Params.recently_added.films }}
      <div class="film">
        <div class="film-image-container">
          <img src="{{ .image }}" alt="{{ .title }}">
          <div class="film-text">
            <h2 class="film-title">{{ .title }}</h2>
            <p class="director-year"><strong>{{ .director }}</strong> {{ .year }}</p>
          </div>
        </div>
        <div class="film-hover">
          <div class="buttons">
            <a href="{{ .watch_link }}"><button id="watch-button">WATCH</button></a>
            <button id="add-button">+</button>
            <button id="heart-button">&#9733;</button>
          </div>
          <p class="film-synopsis">{{ .synopsis }}</p>
        </div>
      </div>
      {{ end }}
    </div>
  </div>
</section>

<!-- Full Bleed Feature 1 -->
<section class="full-bleed-feature feature-1">
  <div class="feature-image-container">
    <img class="feature-image" src="{{ .Params.feature_1.image }}" alt="{{ .Params.feature_1.title }}">
    <a href="{{ .Params.feature_1.watch_link }}">
      <img class="play-button" src="/images/utilities/play-button.png" alt="play button">
    </a>
  </div>
  <div class="feature-text">
    <div class="feature-text-heading">
      <h1>{{ .Params.feature_1.title }}</h1>
      <p>{{ .Params.feature_1.director }} {{ .Params.feature_1.year }}</p>
    </div>
    <p class="feature-synopsis feature-block-1">{{ .Params.feature_1.synopsis }}</p>
    <div class="feature-block-2">
      <div class="feature-text-heading"><p>Filmmaker bio</p></div>
      <p class="filmmaker-bio">{{ .Params.feature_1.filmmaker_bio }}</p>
    </div>
  </div>
</section>

<!-- Trending Section -->
<section class="main trending">
  <div class="grid-container">
    <div class="grid-heading-container">
      <h2 class="grid-heading">{{ .Params.trending.heading }}</h2>
      <a href="{{ .Params.trending.see_all_link }}"><p class="see-all">SEE ALL ></p></a>
    </div>
    <div class="grid">
      {{ range .Params.trending.films }}
      <div class="film">
        <div class="film-image-container">
          <img src="{{ .image }}" alt="{{ .title }}">
          <div class="film-text">
            <h2 class="film-title">{{ .title }}</h2>
            <p class="director-year"><strong>{{ .director }}</strong> {{ .year }}</p>
          </div>
        </div>
        <div class="film-hover">
          <div class="buttons">
            <a href="{{ .watch_link }}"><button id="watch-button">WATCH</button></a>
            <button id="add-button">+</button>
            <button id="heart-button">&#9733;</button>
          </div>
          <p class="film-synopsis">{{ .synopsis }}</p>
        </div>
      </div>
      {{ end }}
    </div>
  </div>
</section>

<div class="space"></div>

<!-- Staff Picks Section -->
<section class="main staff-picks">
  <div class="grid-container">
    <div class="grid-heading-container">
      <h2 class="grid-heading">{{ .Params.staff_picks.heading }}</h2>
      <a href="{{ .Params.staff_picks.see_all_link }}"><p class="see-all">SEE ALL ></p></a>
    </div>
    <div class="grid">
      {{ range .Params.staff_picks.films }}
      <div class="film">
        <div class="film-image-container">
          <img src="{{ .image }}" alt="{{ .title }}">
          <div class="film-text">
            <h2 class="film-title">{{ .title }}</h2>
            <p class="director-year"><strong>{{ .director }}</strong> {{ .year }}</p>
          </div>
        </div>
        <div class="film-hover">
          <div class="buttons">
            <a href="{{ .watch_link }}"><button id="watch-button">WATCH</button></a>
            <button id="add-button">+</button>
            <button id="heart-button">&#9733;</button>
          </div>
          <p class="film-synopsis">{{ .synopsis }}</p>
        </div>
      </div>
      {{ end }}
    </div>
  </div>
</section>

<!-- Full Bleed Feature 2 -->
<section class="full-bleed-feature feature-2">
  <div class="feature-image-container">
    <img class="feature-image" src="{{ .Params.feature_2.image }}" alt="{{ .Params.feature_2.title }}">
    <a href="{{ .Params.feature_2.watch_link }}">
      <img class="play-button" src="/images/utilities/play-button.png" alt="play button">
    </a>
  </div>
  <div class="feature-text">
    <div class="feature-text-heading">
      <h1>{{ .Params.feature_2.title }}</h1>
      <p>{{ .Params.feature_2.director }} {{ .Params.feature_2.year }}</p>
    </div>
    <p class="feature-synopsis feature-block-1">{{ .Params.feature_2.synopsis }}</p>
    <div class="feature-block-2">
      <div class="feature-text-heading"><p>Filmmaker bio</p></div>
      <p class="filmmaker-bio">{{ .Params.feature_2.filmmaker_bio }}</p>
    </div>
  </div>
</section>

<section class="add-height"></section>

<style>
  a {
    text-decoration: none !important;
    border: none;
  }
  /* Mobile - Stack image on top, then text below */
  @media (max-width: 768px) {
    .hero-text-middle {
      position: relative;
    }

    .main {
      margin-top: 0;
    }

    .full-bleed-feature {
      min-height: auto;
      display: flex;
      flex-direction: column;
      align-items: center !important;
      margin-top: 5vh;
    }

    /* Image section - takes up portion of screen */
    .feature-image-container {
      position: relative;
      width: 100%;
      height: 50vh;
      min-height: 300px;
      max-width: 85vw;
      overflow: hidden;
      margin: 0 auto;
      padding: 0;
      display: block;
    }

    .feature-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
      opacity: 1;
      display: block;
      margin: 0;
      padding: 0;
    }

    /* Play button over image */
    .play-button {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 50px;
      height: 50px;
      z-index: 2;
    }

    /* Text section - below image with black background */
    .feature-text {
      width: 85vw !important;
      max-width: 85vw !important;
      margin-left: auto !important;
      margin-right: auto !important;
      padding: 2rem 1.5rem;
      background: #000;
      display: block;
    }


    /* Title and Director */
    .feature-text-heading {
      margin-bottom: 1.5rem;
    }

    .feature-text-heading h1 {
      font-size: 1.75rem;
      line-height: 1.2;
      margin-bottom: 0.5rem;
    }

    .feature-text-heading p {
      font-size: 1rem;
      color: rgba(255, 255, 255, 0.7);
    }

    /* Synopsis */
    .feature-synopsis {
      font-size: 0.95rem;
      line-height: 1.7;
      margin-bottom: 2rem;
      color: rgba(255, 255, 255, 0.9);
    }

    /* Filmmaker Bio Section */
    .feature-block-2 {
      margin-top: 2rem;
      padding-top: 2rem;
      border-top: 1px solid rgba(255, 255, 255, 0.2);
    }

    .feature-block-2 .feature-text-heading {
      margin-bottom: 0.75rem;
    }

    .feature-block-2 .feature-text-heading p {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: rgba(255, 255, 255, 0.6);
    }

    .filmmaker-bio {
      font-size: 0.9rem;
      line-height: 1.6;
      color: rgba(255, 255, 255, 0.75);
    }

    /* Reset grid properties for mobile */
    .feature-block-1,
    .feature-block-2 {
      grid-column: auto;
      grid-row: auto;
    }

    .feature-text > .feature-text-heading:first-child {
      grid-column: auto;
      grid-row: auto;
    }
  }

</style>
{{ end }}
